/*!
 * jDashboard v2.1
 * http://codecanyon.net/item/jdashboard/135111
 *
 * Copyright (c) 2010-2012 Sarathi Hansen
 * http://www.codecanyon.net/user/sarthemaker
 *
 * Includes: Cookie plugin
 * http://plugins.jquery.com/project/Cookie
 * Copyright (c) 2006 Klaus Hartl (stilbuero.de)
 * Dual licensed under the MIT and GPL licenses
 *
 * Date: December 1st, 2012
 */
(function(f){function t(){this.isCollapsed=!this.isCollapsed;var a=this;this.body.slideToggle(100,function(){"none"===a.body.css("display")&&a.$.addClass("jdash_collapsed")});"block"===this.body.css("display")&&this.$.removeClass("jdash_collapsed");i(this.dashboard)}function u(){(this.isRemoved=!this.isRemoved)?(this.$.addClass("jdash_hidden"),this.style.display="none",this.dashboard.appendChild(this)):(this.$.removeClass("jdash_hidden"),this.style.display="block",this.dashboard.columns[this.dashboard.columns.length-
1].appendChild(this));this.style.display=this.isRemoved?"none":"block";i(this.dashboard)}function i(a){k?localStorage["jdashStorage?dashID:"+a.id+"&storageID:20"]=l(a):m&&f.cookie("jdashStorage?dashID:"+a.id+"&storageID:20",l(a))}function l(a){for(var b="",a=a.$.find(".jdash-widget"),c=a.length;c--;)b+=a[c].id+","+a.eq(c).parent().index()+","+(a[c].isCollapsed?"1":"0")+","+(a[c].isRemoved?"1":"0"),0<c&&(b+="/");return b}function n(a,b){for(var c,d,e=b.split("/"),g=e.length;g--;)if(c=e[g].split(","),
d=document.getElementById(c[0]))"1"===c[3]?(d.$.addClass("jdash_hidden"),d.style.display="none",d.isRemoved=!0,a.appendChild(d)):(d.$.removeClass("jdash_hidden"),d.style.display="block",d.isRemoved=!1,a.columns[parseFloat(c[1])].appendChild(d)),"1"===c[2]?(d.$.addClass("jdash_collapsed").find(".jdash-body").hide(),d.isCollapsed=!0):(d.$.removeClass("jdash_collapsed").find(".jdash-body").show(),d.isCollapsed=!1);c=a.$.children(".jdash-widget:not(.jdash_hidden)");d=0;for(g=c.length;g--;)a.columns[d].appendChild(c[g]),
c[g].isRemoved||(c[g].style.display="block"),d++,d>=a.columns.length&&(d=0);c=f("#controls");c.addClass("jdash-controls");for(d=a.widgets.length;d--;){g=a.widgets[d];e=document.createElement("label");e.innerHTML="<span>"+f(g.$.find(".jdash-header-inner")[0].firstChild).text().replace(/^\s+|\s+$/,"")+"</span>";c.append(e);var h=document.createElement("input");h.type="checkbox";h.id="jdash-control_"+a.id+"-"+d;h.widget=g;g.isRemoved||(h.checked="checked");h.onclick=function(){f.proxy(u,this.widget)()};
f(e).prepend(h)}a.$.trigger("load")}function p(a){var b=f(a.target);if(!b.hasClass("jdash-collapse")&&!b.parents().is(".jdash-toolbar"))return null==this.dashboard.widgetReady&&null==this.dashboard.widgetDragging&&(b=this.$.offset(),a=q(a),this.dragOffsetLeft=b.left,this.dragOffsetTop=b.top,this.clickOffsetLeft=a.x-b.left,this.clickOffsetTop=a.y-b.top,this.dashboard.widgetReady=this),!1}function r(){if(null==this.widgetDragging)this.widgetReady=null;else{var a=this.widgetDragging,b=a.$.offset();a.$.insertBefore(this.sector.$);
a.style.marginBottom=-a.offsetHeight-parseFloat(a.$.css("marginTop"))+"px";a.style.top=b.top-this.sector.$.offset().top+"px";a.style.left=b.left-this.sector.$.parent().offset().left-parseFloat(a.$.css("marginLeft"))+"px";this.sector.$.animate({height:a.$.height()},200);a.$.animate({left:0,top:0},200,"",function(){this.style.marginBottom=this.$.css("marginTop");this.dashboard.sector.$.hide();this.$.removeClass("jdash_dragging")});i(this);this.widgetDragging=this.widgetReady=null}}function s(a){var b;
null==this.widgetDragging&&null!=this.widgetReady&&(this.widgetDragging=this.widgetReady,this.widgetReady=null,b=this.widgetDragging,b.$.addClass("jdash_dragging"),b.style.marginBottom=-b.$.outerHeight()-parseFloat(b.$.css("marginTop"))+"px",this.sector.$.insertAfter(b),this.sector.style.display="block",this.sector.style.height=b.$.height()+"px");if(null!=this.widgetDragging){b=a.clientY;"undefined"==typeof b&&(b=(a.originalEvent.touches[0]||a.originalEvent.changedTouches[0]).clientY-f(window).scrollTop());
40>b&&window.scrollTo(0,f(window).scrollTop()-10);b>f(window).height()-40&&window.scrollTo(0,f(window).scrollTop()+10);b=this.widgetDragging;var a=q(a),c=a.x-b.dragOffsetLeft-b.clickOffsetLeft,d=a.y-b.dragOffsetTop-b.clickOffsetTop,e,g=!1,h=b.$.offset(),i=h.left+b.offsetWidth/2,j=this.sector.$.parent();b.style.left=c+"px";b.style.top=d+"px";if(j.prev(".jdash-column").length&&(e=j.prev()[0])&&i+10<e.$.offset().left+e.offsetWidth)e.appendChild(this.sector),h=b.$.offset(),g=!0;else if(j.next(".jdash-column").length&&
(e=j.next()[0])&&i-10>e.$.offset().left)e.appendChild(this.sector),h=b.$.offset(),g=!0;if(e=this.sector.previousSibling)e===b&&(e=e.previousSibling),e&&h.top+10<e.$.offset().top+e.offsetHeight/2&&(e.parentNode.insertBefore(this.sector,e),h=b.$.offset(),g=!0);if(e=this.sector.nextSibling)e===b&&(e=e.nextSibling),e&&h.top+b.offsetHeight-10>e.$.offset().top+e.offsetHeight/2&&(e.parentNode.insertBefore(this.sector,e.nextSibling),h=b.$.offset(),g=!0);g&&(b.dragOffsetLeft=h.left-c,b.dragOffsetTop=h.top-
d,b.style.left=a.x-b.dragOffsetLeft-b.clickOffsetLeft+"px",b.style.top=a.y-b.dragOffsetTop-b.clickOffsetTop+"px")}}function q(a){"undefined"==typeof a.pageX&&(a=a.originalEvent.touches[0]||a.originalEvent.changedTouches[0]);return{x:a.pageX,y:a.pageY}}var k=null!==window.localStorage;if(!k){f.cookie=function(a,b,c){if("undefined"!=typeof b){c=c||{};null===b&&(b="",c.a=-1);var d="";if(c.a&&("number"==typeof c.a||c.a.toUTCString))"number"==typeof c.a?(d=new Date,d.setTime(d.getTime()+864E5*c.a)):d=
c.a,d="; expires="+d.toUTCString();document.cookie=[a,"=",encodeURIComponent(b),d,c.path?"; path="+c.path:"",c.domain?"; domain="+c.domain:"",c.b?"; secure":""].join("")}else{b=null;if(document.cookie&&""!=document.cookie){c=document.cookie.split(";");for(d=0;d<c.length;d++){var e=f.trim(c[d]);if(e.substring(0,a.length+1)==a+"="){b=decodeURIComponent(e.substring(a.length+1));break}}}return b}};f.cookie("jdashCookiesOn","1");var m="1"===f.cookie("jdashCookiesOn");f.cookie("jdashCookiesOn",null)}f.fn.jDashboard=
function(){return this.each(function(){this.$=f(this).addClass("jdash");for(var a=[],b,c=3,d=[26,37,37];c--;)b=document.createElement("div"),b.$=f(b).addClass("jdash-column").css({width:d[c]+"%"}).appendTo(this),a.push(b);this.$.append('<div class="clear"></div>');this.columns=a;b=this.$.find(".jdash-widget");for(c=b.length;c--;)a=b[c],a.$=b.eq(c),a.originalIndex=c,a.dashboard=this,a.body=a.$.find(".jdash-body"),a.body.children(".jdash-info").append('<div class="jdash-info-arrow_fill"></div><div class="jdash-info-arrow_stroke"></div>'),
a.isDragInit=a.isDragging=a.isCollapsed=a.isRemoved=!1,a.dragOffsetLeft=a.dragOffsetTop=a.clickOffsetLeft=a.clickOffsetTop=0,a.$.hasClass("jdash_collapsed")&&(a.isCollapsed=!0,a.body.hide()),a.$.hasClass("jdash_hidden")&&(a.isRemoved=!0,a.style.display="none",this.appendChild(a)),a.$.find(".jdash-header").html(a.$.find(".jdash-header").html().replace(/^\s+/,"")),a.$.find(".jdash-header").append(f(document.createElement("div")).addClass("jdash-collapse").on("click",f.proxy(t,a))).wrapInner('<div class="jdash-header-inner" />').on({mousedown:f.proxy(p,
a),touchstart:f.proxy(p,a)});this.widgets=b;a=document.createElement("div");a.$=f(a).addClass("jdash-sector");this.appendChild(a);this.sector=a;this.widgetDragging=this.widgetReady=null;f(document).on({mousemove:f.proxy(s,this),touchmove:f.proxy(s,this),mouseup:f.proxy(r,this),touchend:f.proxy(r,this)});k?(a=localStorage.getItem("jdashStorage?dashID:"+this.id+"&storageID:20"),n(this,a?a:"")):m&&(a=f.cookie("jdashStorage?dashID:"+this.id+"&storageID:20"),n(this,a?a:""))})}})(jQuery);