function getElCoordinate(e){for(var t=e.offsetTop,a=e.offsetLeft,o=e.offsetWidth,n=e.offsetHeight;e=e.offsetParent;)t+=e.offsetTop,a+=e.offsetLeft;return{top:t,left:a,width:o,height:n,bottom:t+n,right:a+o}}if(document.charset="utf-8","function"!=typeof getElementById)var getElementById=function(e){if("object"==typeof e)return e;if(document.getElementById(e))return document.getElementById(e);throw Error(e+' argument error, can not find "'+e+'" element')};var neverModules=window.neverModules||{};neverModules.modules=neverModules.modules||{},neverModules.modules.slider=function(e){"object"!=typeof e&&(e={}),this.targetId=e.targetId,this.hints=e.hints?e.hints:"",this.sliderCss=e.sliderCss?e.sliderCss:"",this.barCss=e.barCss?e.barCss:"",this.boxCss=e.boxCss?e.boxCss:"",this.min=e.min?e.min:0,this.max=e.max?e.max:100,this.bBox=e.bBox?e.bBox:!1,this.step=e.step?e.step>0?e.step:1:1,this.parent=e.parent?e.parent:window,this.onstart=function(){},this.onchange=function(){},this.onend=function(){},this._defaultInitializer.apply(this)},neverModules.modules.slider.prototype={_defaultInitializer:function(){if(this._bar=null,this._slider=null,this._box=null,this._wrapper=null,this._target=this.parent.document.getElementById(this.targetId),this.min>this.max){var e=this.min;this.min=this.max,this.max=e}this._value=this.min},create:function(){this._createSlider()},dispose:function(){},createBar:function(){with(this){var _self=this;_bar=this.parent.document.createElement("DIV"),_wrapper.appendChild(_bar),_bar.title=hints,_bar.id=targetId+"_bar",_bar.className=barCss,_bar.style.position="absolute",_bar.onmousedown=function(e){_self._initMoveSlider(e)}}},createBox:function(){with(this)_box=this.parent.document.createElement("INPUT"),_box.type="text",_wrapper.appendChild(_box),_box.id=targetId+"_box",_box.className=boxCss,_box.style.position="absolute",_box.maxLength=(max+"").length,_box.value=_value,_box.onclick=function(){""!=this.value&&"undefined"!=this.value&&null!=this.value&&(_value=parseInt(this.value))},_box.onkeydown=function(e){if(e=e?e:window.event?window.event:null,13==e.keyCode&&this.blur(),38==e.keyCode){var t=parseInt(this.value,10)+step;t=t>max?max:t,this.value=t}if(40==e.keyCode){var t=parseInt(this.value,10)-step;t=min>t?min:t,this.value=t}},_box.onkeyup=function(){if(""!=this.value&&"undefined"!=this.value&&null!=this.value){var e=parseInt(this.value,10);this.value=/^[1-9]\d*|0$/.test(e)?e:min}},_box.onblur=function(){var e=parseInt(this.value,10);/^[1-9]\d*|0$/.test(e)?(e=e>max?max:min>e?min:e,0!=e%step&&(e=(parseInt(e/step)+1)*step),this.value=e,wsetValue(e)):(this.value=min,wsetValue(min)),fireChange(),fireEnd()}},wsetValue:function(n){with(this){if(!_bar)return;n=_Number(Number(n)),n=n>max?max:min>n?min:n,_bar.style.left=Math.round((n-min)*((_slider.offsetWidth-_bar.offsetWidth)/(max-min)))+"px",_value=n,bBox&&(_box.value=_value)}},getValue:function(){return this._Number(this._value)},setTitle:function(e){this._bar.title=e,this._target.title=e},fireStart:function(){this.onstart.call(this)},fireChange:function(){this.onchange.call(this)},fireEnd:function(){this.onend.call(this)},_createSlider:function(){with(this){_wrapper=this.parent.document.createElement("DIV"),_target.appendChild(_wrapper),_wrapper.id=targetId+"_wrapper",_wrapper.style.position="relative",_slider=this.parent.document.createElement("DIV"),_wrapper.appendChild(_slider),_slider.id=targetId+"_slider",_slider.className=sliderCss,_slider.style.position="absolute",createBar(),bBox&&createBox();var _self=this;_slider.onclick=function(e){_self._moveTo(e)}}},_moveTo:function(evt){with(this){evt=evt?evt:this.parent.event;var x=evt.clientX-getElCoordinate(_slider).left-Math.round(_bar.offsetWidth/2);x=_coordsX(x),_value=Math.round(x/((_slider.offsetWidth-_bar.offsetWidth)/(max-min))+parseInt(min,10)),0!=_value%step&&(_value=(parseInt(_value/step)+1)*step),x=Math.ceil((_value-min)*((_slider.offsetWidth-_bar.offsetWidth)/(max-min))),_bar.style.left=x+"px",bBox&&(_box.value=getValue()),fireChange(),fireEnd()}},_coordsX:function(x){with(this)return x=_Number(x),x=_slider.offsetLeft>=x?_slider.offsetLeft:x>=_slider.offsetLeft+_slider.offsetWidth-_bar.offsetWidth?_slider.offsetLeft+_slider.offsetWidth-_bar.offsetWidth:x},_coordsY:function(y){with(this);},_Number:function(e){return isNaN(e)?0:e},_initMoveSlider:function(evt){with(this){evt=evt?evt:this.parent.event;var _self=this;_bar.slider_x=evt.clientX-_bar.offsetLeft,fireStart(),this.parent.document.onmousemove=function(e){_self._changeHandle(e)},this.parent.document.onmouseup=function(e){_self._endHandle(e)}}},_changeHandle:function(evt){with(this){if("none"==_target.style.display)return _endHandle(evt),void 0;parent.getSelection?parent.getSelection().removeAllRanges():parent.document.selection.empty(),evt=evt?evt:this.parent.event;var x=evt.clientX-_bar.slider_x;x=_coordsX(x),_value=Math.round(x/((_slider.offsetWidth-_bar.offsetWidth)/(max-min))+parseInt(min,10)),_value!==min&&_value!==max&&0!=_value%step&&(_value=(parseInt(_value/step)+1)*step),x=Math.ceil((_value-min)*((_slider.offsetWidth-_bar.offsetWidth)/(max-min))),_bar.style.left=_Number(x)+"px",bBox&&setTimeout(function(){_box.value=_value},1),fireChange()}},_endHandle:function(evt){with(this)this.parent.document.onmousemove=null,this.parent.document.onmouseup=null,fireEnd()}};